# ============================================================================
# SHINY BEAUTY COSMETIC - ENVIRONMENT CONFIGURATION
# ============================================================================
# ⚠️  CRITICAL SECURITY WARNING:
# 1. NEVER commit the actual .env file with real credentials!
# 2. Copy this file to .env and fill in your actual values
# 3. .env is already in .gitignore - verify it's not tracked: git ls-files | findstr .env
# 4. Rotate all secrets if accidentally committed
# ============================================================================

# ============================================================================
# DATABASE CONFIGURATION
# ============================================================================

# Option 1: Development with Docker (recommended for local dev)
# Start Docker first: docker-compose -f docker-compose.dev.yml up -d
CONNECT_DB_URL=mongodb://admin:admin123@localhost:27017/shiny_beauty_dev?authSource=admin

# Option 2: Production with MongoDB Atlas (cloud)
# Get this from: https://cloud.mongodb.com/
# CONNECT_DB_URL=mongodb+srv://username:password@cluster0.xxxxx.mongodb.net/shiny_beauty_prod?retryWrites=true&w=majority

# ============================================================================
# APPLICATION CONFIGURATION
# ============================================================================
NODE_ENV=development
PORT=4000
URL_SERVER=http://localhost:4000
CLIENT_URL=http://localhost:5173

# ============================================================================
# AUTHENTICATION & SECURITY
# ============================================================================
# ⚠️  CRITICAL: Generate strong random secrets (minimum 32 characters)
# Generate command: node -e "console.log(require('crypto').randomBytes(32).toString('hex'))"
# Example output: a1b2c3d4e5f6789... (64 characters)

JWT_SECRET=REPLACE_WITH_YOUR_STRONG_SECRET_MINIMUM_32_CHARS
JWT_EXPIRES_IN=1d

# Session secret for express-session and passport
SESSION_SECRET=REPLACE_WITH_YOUR_STRONG_SESSION_SECRET_MINIMUM_32_CHARS

# ============================================================================
# REDIS CONFIGURATION
# ============================================================================
# Development with Docker (after running docker-compose.dev.yml)
REDIS_HOST=localhost
REDIS_PORT=6379
# REDIS_PASSWORD=  # No password for development, uncomment for production

# Production with Redis Cloud (https://redis.com/)
# REDIS_HOST=redis-xxxxx.c1.us-east-1-2.ec2.cloud.redislabs.com
# REDIS_PORT=12345
# REDIS_PASSWORD=your_redis_password_here


# ============================================================================
# EMAIL SERVICE CONFIGURATION (Nodemailer)
# ============================================================================
# Option 1: Gmail with App Password (recommended)
# Setup guide: https://support.google.com/accounts/answer/185833
EMAIL_NAME=your_email@gmail.com
# EMAIL_APP_PASSWORD=your_16_digit_app_password  # 16-character from Google Account

# Option 2: Custom SMTP (e.g., SendGrid, Mailgun)
EMAIL_HOST=smtp.gmail.com
EMAIL_PORT=587
EMAIL_SECURE=false
EMAIL_USER=your_email@gmail.com
EMAIL_PASSWORD=your_password_or_app_password

# Email sender information (displayed in emails)
EMAIL_FROM_NAME=SHINY BEAUTY
EMAIL_FROM_ADDRESS=noreply@shinybeauty.com

# ============================================================================
# CAMPAIGN & MARKETING CONFIGURATION
# ============================================================================
# Frontend URL for email templates (links back to your website)
FRONTEND_URL=http://localhost:5173

# Bull Queue Configuration (for background jobs)
# Redis URL for Bull Queue (uses same Redis instance)
REDIS_URL=redis://localhost:6379

# Email sending rate limits (to avoid spam filters)
CAMPAIGN_EMAIL_BATCH_SIZE=100      # Emails per batch
CAMPAIGN_EMAIL_BATCH_DELAY=1000    # Delay between batches (ms)
CAMPAIGN_MAX_RETRIES=3             # Retry failed emails

# ============================================================================
# FILE UPLOAD SERVICE (CLOUDINARY)
# ============================================================================
# Get free credentials from: https://cloudinary.com/console
# Sign up → Dashboard → Copy credentials below
CLOUDINARY_CLOUD_NAME=your_cloudinary_cloud_name
CLOUDINARY_API_KEY=your_cloudinary_api_key
CLOUDINARY_API_SECRET=your_cloudinary_api_secret

# ============================================================================
# GOOGLE OAUTH INTEGRATION
# ============================================================================
# Get credentials from: https://console.cloud.google.com/apis/credentials
# Steps:
# 1. Create OAuth 2.0 Client ID
# 2. Set Authorized redirect URI: http://localhost:4000/api/v1/oauth/google/callback
# 3. Copy Client ID and Secret below
GOOGLE_CLIENT_ID=your_google_client_id.apps.googleusercontent.com
GOOGLE_CLIENT_SECRET=your_google_client_secret

# Facebook OAuth (optional - currently disabled in passport.js)
# FACEBOOK_APP_ID=your_facebook_app_id
# FACEBOOK_APP_SECRET=your_facebook_app_secret

# Twitter OAuth (optional - currently disabled in passport.js)
# TWITTER_CONSUMER_KEY=your_twitter_consumer_key
# TWITTER_CONSUMER_SECRET=your_twitter_consumer_secret

# ============================================================================
# STRIPE PAYMENT INTEGRATION
# ============================================================================
# Get keys from: https://dashboard.stripe.com/apikeys
# ⚠️  IMPORTANT: Use test keys (sk_test_...) for development
# ⚠️  NEVER commit live keys (sk_live_...)
STRIPE_SECRET_KEY=sk_test_your_stripe_test_secret_key_here

# VNPAY Payment Gateway (Vietnam - to be implemented)
# Documentation: https://sandbox.vnpayment.vn/apis/
# VNPAY_TMN_CODE=your_vnpay_terminal_code
# VNPAY_HASH_SECRET=your_vnpay_hash_secret
# VNPAY_URL=https://sandbox.vnpayment.vn/paymentv2/vpcpay.html

# MOMO Payment Gateway (Vietnam - to be implemented)
# Documentation: https://developers.momo.vn/
# MOMO_PARTNER_CODE=your_momo_partner_code
# MOMO_ACCESS_KEY=your_momo_access_key
# MOMO_SECRET_KEY=your_momo_secret_key
# MOMO_ENDPOINT=https://test-payment.momo.vn


# ============================================================================
# RATE LIMITING CONFIGURATION
# ============================================================================
# Adjust these values based on your application needs and traffic patterns
RATE_LIMIT_API_MAX=100        # General API: 100 requests per 15 minutes
RATE_LIMIT_AUTH_MAX=5         # Authentication: 5 login attempts per 15 minutes
RATE_LIMIT_OTP_MAX=3          # OTP requests: 3 requests per hour
RATE_LIMIT_PAYMENT_MAX=10     # Payment endpoints: 10 attempts per hour
RATE_LIMIT_CART_MAX=30        # Cart operations: 30 requests per minute

# ============================================================================
# SOCKET.IO CONFIGURATION
# ============================================================================
# CORS origin for Socket.IO connections (match your frontend URL)
SOCKET_CORS_ORIGIN=http://localhost:5173
SOCKET_PORT=4000

# ============================================================================
# LOGGING CONFIGURATION
# ============================================================================
# Log levels: error, warn, info, debug
LOG_LEVEL=info
LOG_DIR=./logs

# ============================================================================
# SETUP CHECKLIST
# ============================================================================
# Before running the application, ensure you have:
# 
# ✅ 1. Copied this file to .env
# ✅ 2. Generated strong JWT_SECRET and SESSION_SECRET
# ✅ 3. Setup MongoDB (Docker or Atlas)
# ✅ 4. Setup Redis (Docker or Redis Cloud)
# ✅ 5. Created Cloudinary account and copied credentials
# ✅ 6. Created Google OAuth app and copied credentials
# ✅ 7. Created Stripe account and copied test keys
# ✅ 8. Setup email service (Gmail App Password or SMTP)
# ✅ 9. Configured FRONTEND_URL for email templates
# ✅ 10. Verified .env is in .gitignore
# ✅ 11. Started Docker services: docker-compose -f docker-compose.dev.yml up -d
# ✅ 12. Never committed .env file to Git
#
# Security reminders:
# - Use different secrets for development and production
# - Rotate secrets regularly in production
# - Never share secrets via chat, email, or screenshots
# - Use environment-specific .env files (.env.development, .env.production)
# - Enable 2FA on all service accounts (Google, Stripe, Cloudinary, etc.)
#
# ============================================================================